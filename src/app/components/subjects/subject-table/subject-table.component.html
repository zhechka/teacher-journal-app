<div class="subject-table-wrapper">
  <div class="header" *ngIf="students; else loading">
    <h2 class="header__text">{{ nameOfSubject | translate }}</h2>
    <div class="header__button button-plus" (click)="addDate()"></div>
  </div>
  <div class="table">
    <table>
      <tr class="table__row table__row_background_blue">
        <th class="table__cell">
          {{ 'name' | translate }}
        </th>
        <th class="table__cell">
          {{ 'lastName' | translate }}
        </th>
        <th class="table__cell">
          {{ 'averageMark' | translate }}
        </th>
        <th class="table__cell" *ngFor="let item of dates; index as i">
          <input
            class="table__input"
            type="text"
            (ngModelChange)="dataChanged($event, i)"
            [ngModel]="dates[i]"
          />
        </th>
      </tr>
      <tr appCellColor class="table__row" *ngFor="let student of students">
        <td class="table__cell">{{ student.name }}</td>
        <td class="table__cell">{{ student.lastName }}</td>
        <td class="table__cell">
          {{ getAverageMark(student.index) }}
        </td>
        <td class="table__cell" *ngFor="let date of dates">
          <input
            class="table__input"
            type="number"
            [(ngModel)]="subject.marks[date][student.index]"
            (ngModelChange)="dataChanged()"
            appMarkValidator
            min="0"
            max="10"
          />
        </td>
      </tr>
    </table>
  </div>
  <div class="form row">
    <label for="Teacher">{{ 'teacher' | translate }}</label>
    <input class="form__input" [(ngModel)]="teacher" type="text" />
  </div>
  <button
    type="submit"
    class="button btn"
    (click)="saveMarksAndTeacherForSubject()"
    routerLink="/subjects/"
  >
    Save
  </button>
  <ng-template #loading> <p>Loading...</p> </ng-template>
</div>
